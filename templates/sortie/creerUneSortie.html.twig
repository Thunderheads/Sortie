{% extends 'base.html.twig' %}

{% block title %}Hello SortieController!{% endblock %}



{% block body %}
<div class ="container-fluid">
    <div class="card ">
        <div class="card-header text-white bg-info">
            Créer une Sortie
        </div>
    </div>

    <div class="card-body">
        {{ form_start(sortieForm) }}

        <!-- ligne 1-->
        <div class="form-row col-12 d-flex justify-content-around">
            <div class = "col-md-5 mb-3">
                <label for="{{ field_name(sortieForm.nom) }}"> Nom de la sortie </label>
                <input type="text"
                       id="{{ field_name(sortieForm.nom) }}"
                       name="{{ field_name(sortieForm.nom) }}"
                       value=""
                       placeholder=""
                       class="form-control"
                       >
            </div>

            <div class = "col-md-5 mb-3">
                {{ form_label(sortieForm.Campus ) }}
                {{ form_widget(sortieForm.Campus, {'attr': {'class':"form-select", 'aria-label':"Default select example", 'width':'fit'}}) }}
            </div>
        </div>

        <!-- ligne 2-->

        <div class="form-row col-12 d-flex justify-content-around">
            <div class = "col-md-5 mb-3">
                <label for="{{ field_name(sortieForm.dateHeureDebut) }}"> Date et heure de la sortie : </label>
                <input type="datetime-local"
                       id="{{ field_name(sortieForm.dateHeureDebut) }}"
                       name="{{ field_name(sortieForm.dateHeureDebut) }}"
                       value="{{ field_name(sortieForm.dateHeureDebut) }}"
                >
            </div>

            <div class = "col-md-5 mb-3 ">
                {{ form_label(sortieForm.Ville )}}
                {{ form_widget(sortieForm.Ville, {'attr': {
                    'class':"form-select",

                }}) }}
            </div>
        </div>

        <!-- ligne 3-->
        <div class="form-row col-12 d-flex justify-content-around">
            <div class = "col-md-5 mb-3">
                <label for="{{ field_name(sortieForm.dateLimiteInscription) }}"> Date limite d'inscription : </label>
                <input type="datetime-local"
                       id="{{ field_name(sortieForm.dateLimiteInscription) }}"
                       name="{{ field_name(sortieForm.dateLimiteInscription) }}"
                       value="{{ field_name(sortieForm.dateLimiteInscription) }}">
            </div>

            <div class = "col-md-5 mb-3">
            </div>
        </div>


        <!-- ligne 4-->
        <div class="form-row col-12 d-flex justify-content-around">
            <div class = "col-md-5 mb-3">
                <label for="{{ field_name(sortieForm.nbInscriptionMax) }}"> Nombre de places : </label>
                <input type="number"
                       id="{{ field_name(sortieForm.nbInscriptionMax) }}"
                       name="{{ field_name(sortieForm.nbInscriptionMax) }}"
                       value="{{ field_name(sortieForm.nbInscriptionMax) }}"
                       class="form-control">
            </div>
            <div class = "col-md-5 mb-3">
                {{ form_label(sortieForm.Lieu )}}
                {{ form_widget(sortieForm.Lieu, {'attr': {
                    'class':"form-select",
                    'aria-label':"Default select example",
                    'width':'fit',
                    'onchange':"getComboA(this)"

                }}) }}

            </div>
        </div>


        <!-- ligne 5-->
        <div class="form-row col-12 d-flex justify-content-around">
            <div class = "col-md-5 mb-3">
                <label for="{{ field_name(sortieForm.duree) }}"> Durée : </label>
                <input type="number"
                       id="{{ field_name(sortieForm.duree) }}"
                       name="{{ field_name(sortieForm.duree) }}"
                       value="{{ field_name(sortieForm.duree) }}"
                        class="form-control">
            </div>

            <div class = "col-md-5 mb-3">
                {{ form_label(sortieForm.Rue )}}
                {{ form_widget(sortieForm.Rue, {'attr': {
                    'class':"form-control",

                }}) }}
            </div>
        </div>


        <!-- ligne 6-->
        <div class="form-row col-12 d-flex justify-content-around">
            <div class = "col-md-5 mb-3">
                {{ form_label(sortieForm.infosSortie )}}
                {{ form_widget(sortieForm.infosSortie, {'attr': {
                    'class':"form-control",

                }}) }}
            </div>

            <div class = "col-md-5 mb-3">

                <div>
                    {{ form_label(sortieForm.CodePostal )}}
                    {{ form_widget(sortieForm.CodePostal, {'attr': {
                        'class':"form-control",

                    }}) }}
                </div>



                <div>
                    {{ form_label(sortieForm.Latitude )}}
                    {{ form_widget(sortieForm.Latitude, {'attr': {
                        'class':"form-control",

                    }}) }}
                </div>
                <div>
                    {{ form_label(sortieForm.Longitude )}}
                    {{ form_widget(sortieForm.Longitude, {'attr': {
                        'class':"form-control",

                    }}) }}
                </div>
            </div>
        </div>



        <!-- ligne des boutons -->

        <div class="form-row col-12 d-flex justify-content-center mt-3">
            <div class="col-2">
                {{ form_widget(sortieForm.Enregistrer, {'attr': {'class':'btn btn-primary'}}) }}
            </div>
            <div class="col-2">
                {{ form_widget(sortieForm.Publier, {'attr': {'class':'btn btn-primary'}}) }}
            </div >
            <div>
                <a href="{{ asset('home') }}">
                    {{ form_widget(sortieForm.Annuler, {'attr': {'class':'btn btn-primary'}}) }}
                </a>
            </div >

        </div>

        {{ form_end(sortieForm) }}


        </div>
</div>
    <script>
        //
        function getComboA(selectObject){
            const value = selectObject.value

            let url = "http://localhost/paricilasortie/public/lieu/"+value;

            fetch(url)
                .then(reponse => reponse.json())
                .then(tableau => {
                    document.getElementById("sortie_Rue").value = tableau.rue;
                    document.getElementById("sortie_CodePostal").value = tableau.ville.codePostal;
                    document.getElementById("sortie_Latitude").value = tableau.latitude;
                    document.getElementById("sortie_Longitude").value = tableau.longitude;
                    document.getElementById("sortie_Ville").value = tableau.ville.id;


                });



        }

    </script>

{% endblock %}